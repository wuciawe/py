<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset='utf-8'>
    <meta name="description" content="拼音 : ">
    <meta name="author" content="胡嘉偉">

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/stylesheet.css">
    <link rel="stylesheet" href="assets/css/mycss.css">
    <link rel="stylesheet" href="assets/css/angular-motion.min.css">

    <!-- Fav and touch icons -->
    <!-- Update these with your own images-->
    <link rel="shortcut icon" href="http://wuciawe.github.io/favicon.ico">
    <script src="assets/js/jquery-1.11.1.min.js"></script>
    <!--<script src="assets/js/bootstrap.min.js"></script>-->
    <script src="assets/js/angular.min.js"></script>
    <script src="assets/js/angular-animate.min.js"></script>
    <script src="assets/js/ZeroClipboard.min.js"></script>
    <script src="assets/js/ngclip.min.js"></script>
    <script src="assets/js/angular-strap.min.js"></script>
    <script src="assets/js/angular-strap.tpl.min.js"></script>
    <script src="assets/js/angular-file-upload-all.min.js"></script>
    <script src="assets/js/ng-script.min.js"></script>

    <title>拼音錄入</title>
</head>
<body data-ng-app="myApp">


<header class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0px;">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#jb-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" target="_blank" href="#">The Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="jb-navbar-collapse">
            <p class="navbar-text" style="color: #ffffff;"><strong>拼音錄入</strong> Enjoy it!</p>
        </div>
    </div>
</header>

<div class="row">
    <div class="col-xs-8 col-xs-offset-2">
        <strong>說明：</strong>
        <ul style="list-style: circle">
            <li>
                請使用<span class="label label-success">Chrome</span>填表，<span class="label label-warning">Firefox</span>尚未測試，可能部分功能會遇到問題。拒絕<span class="label label-danger">IE</span>。
            </li>
            <li>
                如遇到問題，或提交拼音方案，請與我聯繫，羣內名爲<span class="label label-success">SE All Star</span>。
            </li>
            <li>
                在地區輸入部分(<span class="label label-success"><span class="label label-warning">[xx]</span>片<span class="label label-warning">[xx]</span>小片<span class="label label-danger">[xx]</span>(<span class="label label-warning">[xx]</span>)</span>)填入必填項之後，頁面下方會出現<span class="label label-success">json數據導出按鈕</span>，<span class="label label-success">結果預覽</span>，與<span class="label label-success">json數據</span>。
            </li>
            <li>
                頁面右上方<span class="label label-success">Emptify</span>按鈕的作用是將頁面內容清空。
            </li>
            <li>
                頁面右上方<span class="label label-success">Load Local Json Data</span>按鈕的作用是導入本地json數據，這樣可以避免重複輸入。
            </li>
            <li>
                <span class="label label-primary">聲母表</span>內<span class="label label-success">IPA欄</span>直接輸入<span class="label label-info">IPA</span>，<span class="label label-success">拼音欄</span>點開後可以輸入<span class="label label-info">拼音</span>與<span class="label label-info">例字</span>，例字數量爲0個或更多。
            </li>
            <li>
                <span class="label label-primary">韻母表</span>需要根據方言添加相應的韻母類別，其他與聲母表類似。
            </li>
            <li>
                填好方案後可以點擊<span class="label label-success">Save To Local File</span>按鈕下載json數據(或手動複製<span class="label label-success">Jsonview</span>內容至本地文件中)。將下載數據發送給我。
            </li>
        </ul>
    </div>
</div>
<hr>



<script type="text/ng-template" id="pi1">
    <div class="popover panel panel-default" tabindex="-1">
        <div class="arrow"></div>
        <h3 class="popover-title panel-heading">拼音與例字錄入</h3>
        <div class="popover-content panel-body">
            <ul class="list-group">
                <li class="list-group-item group-int">
                    <div class="row">
                        <div class="input-group col-xs-12 group-int">
                            <span class="input-group-addon">音素拼音</span>
                            <input class="form-control" type="text" placeholder="on" ng-model="ele.vl"/>
                        </div>
                    </div>
                </li>
                <li class="list-group-item group-int" ng-repeat="ex in ele.exs">
                    <div class="row">
                        <div class="col-xs-6 group-int">
                            <div class="input-group">
                                <span class="input-group-addon">例字</span>
                                <input type="text" class="form-control" placeholder="儂" ng-model="ex.w" />
                            </div><!-- /input-group -->
                        </div><!-- /.col-lg-6 -->
                        <div class="col-xs-6 group-int">
                            <div class="input-group">
                                <span class="input-group-addon">拼音</span>
                                <input type="text" class="form-control" placeholder="non" ng-model="ex.p" />
                            </div><!-- /input-group -->
                        </div><!-- /.col-lg-6 -->
                    </div>
                </li>
                <li class="list-group-item group-int">
                    <div class="row">
                        <button class="btn btn-info col-xs-6" ng-click="mkExp(ele)">添加例字</button>
                        <button class="btn btn-info col-xs-6" ng-click="rmExp(ele)">刪除例字</button>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</script>
<script type="text/ng-template" id="pi2">
    <div class="popover" tabindex="-1">
        <div class="arrow"></div>
        <h3 class="popover-title">添加韻類別</h3>
        <div class="popover-content">
            <form name="popoverForm2" novalidate class="css-form">
                <label>韻尾類別：</label><input type="text" ng-model="vcname" placeholder="開尾韻" required autofocus="autofocus" />
            </form>
            <div class="form-actions pull-right">
                <button type="button" class="btn btn-danger" ng-click="$hide()">Close</button>
                <button type="button" class="btn btn-primary" ng-disabled="!popoverForm2.$valid" ng-click="popover.saved=true;$hide();mkCat(vcname)">OK</button>
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="pi3">
    <div class="popover panel panel-success" tabindex="-1">
        <div class="arrow"></div>
        <div class="popover-title panel-heading"><strong>例字</strong></div>
        <div class="popover-content panel-body">
            <ul>
                <li ng-repeat="e in ele.exs">
                    <label><strong>{{ e.w }}：</strong></label>{{ e.p }}
                </li>
            </ul>
        </div>
    </div>
</script>

<div class="container" ng-controller="rmzController">
    <div class="row">
        <div class="col-md-12">
            <form name="form" novalidate class="css-form">
                <h3>
                    <div class="input-group">
                        <input class="" type="text" ng-model="tableData.jv.loc.lvl1" data-placement="left" data-type="info" data-container="body" data-trigger="focus" bs-tooltip data-title="選填" placeholder="太湖"/> 片
                        <input type="text" ng-model="tableData.jv.loc.lvl2" data-placement="left" data-type="info" data-container="body" data-trigger="focus" bs-tooltip data-title="選填" placeholder="蘇滬嘉"/> 小片
                        <input type="text" ng-model="tableData.jv.loc.lvl3" data-placement="left" data-type="info" data-container="body" data-trigger="focus" bs-tooltip data-title="必填" placeholder="上海" required />(
                        <input type="text" ng-model="tableData.jv.loc.opt" data-placement="left" data-type="info" data-container="body" data-trigger="focus" bs-tooltip data-title="選填" placeholder="老派" />) 音素表與拼音方案
                        <div class="input-group-btn">
                            <button class="btn btn-info btn-sm" ng-click="refreshTable()">Emptify</button>
                        </div>
                        <div class="input-group-btn">
                            <button class="btn btn-info btn-sm" ng-file-select ng-model="files" accept=".json">Upload Local Json Data</button>
                        </div>
                </div>
                </h3>
            </form>
            <h3>聲母</h3>
            <form>
                <table>
                <thead>
                <tr ng-repeat="row in tableData.jv.consonants.head">
                    <th ng-if="$first" rowspan="{{ tableData.jv.consonants.headsize.rows }}" colspan="{{ tableData.jv.consonants.headsize.cols }}"></th>
                    <th ng-repeat="ele in row.cells" rowspan="{{ ele.rspan }}" colspan="{{ ele.cspan }}">{{ ele.vl }}</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="row in tableData.jv.consonants.body">
                    <td ng-repeat="ele in row.elements" rowspan="{{ ele.rspan }}" colspan="{{ ele.cspan }}" ng-class="{'rl':ele.corder < 0 || ele.corder % 2 == 0, 'gr': ele.corder > 0 && ele.corder % 2 == 0}">
                        <span ng-if="ele.corder < 0">{{ ele.vl }}</span>
                        <input ng-if="ele.corder > 0 && ele.corder % 2 != 0" type="text" ng-model="ele.vl" tabindex="{{ ele.corder * 1000 + row.rorder }}"/>
                        <a ng-if="ele.corder > 0 && ele.corder % 2 == 0" href="javascript://" data-template="pi1" data-placement="top" data-container = 'body' data-auto-close="1" bs-popover tabindex="{{ ele.corder * 1000 + row.rorder }}">
                            <div>
                                {{ele.vl}}
                            </div>
                        </a>
                    </td>
                </tr>
                </tbody>
            </table>
            </form>
            
            <div class="row">
                <form role="form" class="col-md-8 col-md-offset-2">
                    <div class="form-group">
                        <label for="cinfo">關於聲母拼音說明：</label>
                        <textarea class="form-control" rows="5" id="cinfo" ng-model="tableData.jv.cinfo"></textarea>
                    </div>
                </form>
            </div>


            <h3>韻母</h3>
            <form>
                <table>
                <thead>
                <tr ng-repeat="row in tableData.jv.vowels.head">
                    <th ng-if="$first" rowspan="{{ tableData.jv.vowels.headsize.rows }}" colspan="{{ tableData.jv.vowels.headsize.cols }}"></th>
                    <th ng-repeat="ele in row.cells" rowspan="{{ ele.rspan }}" colspan="{{ ele.cspan }}">{{ ele.vl }}</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat-start="cat in tableData.jv.vowels.cats">
                    <td class="rl" rowspan="{{ cat.cat.rspan + 1 }}" colspan="{{ cat.cat.cspan }}">{{ cat.cat.vl }}</td>
                    <td ng-repeat="ele in cat.body[0].elements" rowspan="{{ ele.rspan }}" colspan="{{ ele.cspan }}" ng-class="{'rl gr':ele.corder % 2 == 0}">
                        <span ng-if="ele.corder < 0">{{ ele.vl }}</span>
                        <input ng-if="ele.corder > 0 && ele.corder % 2 != 0" type="text" ng-model="ele.vl" tabindex="{{ ele.corder * 1000 + row.rorder }}"/>
                        <a ng-if="ele.corder > 0 && ele.corder % 2 == 0" href="javascript://" data-template="pi1" data-placement="top" data-container = 'body' data-auto-close="1" bs-popover tabindex="{{ ele.corder * 1000 + row.rorder }}">
                            <div>
                                {{ele.vl}}
                            </div>
                        </a>
                    </td>
                </tr>
                <!-- Now add Details row: -->
                <tr ng-if="!$first" ng-repeat="row in cat.body">
                    <td ng-repeat="ele in row.elements" rowspan="{{ ele.rspan }}" colspan="{{ ele.cspan }}" ng-class="{'rl gr':ele.corder % 2 == 0}">
                        <span ng-if="ele.corder < 0">{{ ele.vl }}</span>
                        <input ng-if="ele.corder > 0 && ele.corder % 2 != 0" type="text" ng-model="ele.vl" tabindex="{{ ele.corder * 1000 + row.rorder }}"/>
                        <a ng-if="ele.corder > 0 && ele.corder % 2 == 0" href="javascript://" data-template="pi1" data-placement="top" data-container = 'body' data-auto-close="1" bs-popover tabindex="{{ ele.corder * 1000 + row.rorder }}">
                            <div>
                                {{ele.vl}}
                            </div>
                        </a>
                    </td>
                </tr>
                <tr ng-repeat-end>
                    <td colspan="4">
                        <button type="button" class="btn btn-block btn-sm btn-info" ng-click="mkRow(cat)">
                            添加行
                        </button>
                    </td>
                    <td colspan="4">
                        <button type="button" class="btn btn-block btn-sm btn-danger" ng-click="rmRow(cat)">
                            刪除行
                        </button>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td colspan="4">
                        <button type="button" class="btn btn-block btn-sm btn-info" data-template="pi2" data-placement="top" data-container = 'body' data-animation="am-flip-x" bs-popover>
                            添加韻類別
                        </button>
                    </td>
                    <td colspan="4">
                        <button type="button" class="btn btn-block btn-sm btn-danger" ng-click="rmCat()">
                            刪除韻類別
                        </button>
                    </td>
                </tr>
                </tbody>
            </table>
            </form>
            
            <div class="row">
                <form role="form" class="col-md-8 col-md-offset-2">
                    <div class="form-group">
                        <label for="vinfo">關於韻母拼音說明：</label>
                        <textarea class="form-control" rows="5" id="vinfo" ng-model="tableData.jv.vinfo"></textarea>
                    </div>
                </form>
            </div>


            <div ng-if="form.$valid" class="btn-toolbar text-center" role="toolbar">
                <div class="btn-group" role="group">
                    <button class="btn btn-info" ng-click="savedata()">Save to Local File</button>
                </div>
                <div class="btn-group" role="group">
                    <button class="btn btn-info" clip-click-fallback="fallback(copy)" clip-copy="tableData.jv | json" clip-click="suc()">
                        Copy Into Clipboard
                    </button>
                </div>
                <div class="btn-group" role="group" ng-model="button.radio" bs-radio-group>
                    <label class="btn btn-default">
                        <input name="pre" type="radio" class="btn btn-default" value="0">
                        Preview
                    </label>
                    <label class="btn btn-default">
                        <input name="json" type="radio" class="btn btn-default" value="1">
                        Json view
                    </label>
                </div>
            </div>

            <div ng-if="form.$valid && button.radio == 0">
                <form novalidate class="css-form">
                    <h2>{{ (tableData.jv.loc.lvl1.length > 0 ? tableData.jv.loc.lvl1 + "片 - " : "") + (tableData.jv.loc.lvl2.length > 0 ? tableData.jv.loc.lvl2 + "小片 - " : "") + tableData.jv.loc.lvl3 + (tableData.jv.loc.opt.length > 0 ? '(' + tableData.jv.loc.opt + ')' : "" )}} 音素表與拼音方案</h2>
                </form>
                <h3>聲母</h3>
                <table>
                    <thead>
                    <tr ng-repeat="row in tableData.jv.consonants.head">
                        <th ng-if="$first" rowspan="{{ tableData.jv.consonants.headsize.rows }}" colspan="{{ tableData.jv.consonants.headsize.cols }}"></th>
                        <th ng-repeat="ele in row.cells" rowspan="{{ ele.rspan }}" colspan="{{ ele.cspan }}">{{ ele.vl }}</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="row in tableData.jv.consonants.body">
                        <td ng-repeat="ele in row.elements" rowspan="{{ ele.rspan }}" colspan="{{ ele.cspan }}" ng-class="{'rl':ele.corder < 0 || ele.corder % 2 == 0, 'pr': ele.corder >= 0 && ele.corder % 2 != 0, 'pl': ele.corder >= 0 && ele.corder % 2 == 0, 'vg':ele.vl == '', 'gr':ele.exs != ''}">
                            <a href="javascript://" ng-if="ele.exs != '' " data-template="pi3" data-placement="top" data-container = 'body' data-animation="am-flip-x" data-trigger="hover" data-auto-close="1" bs-popover>
                                <div>
                                    {{ele.vl}}
                                </div>
                            </a>
                            <div ng-if="ele.exs == '' ">
                                {{ele.vl}}
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
                <div ng-if="tableData.jv.cinfo.length != 0" class="row">
                    <form role="form" class="col-md-8 col-md-offset-2">
                        <div class="form-group">
                            <label for="cinfod">關於聲母拼音說明：</label>
                            <p id="cinfod">{{ tableData.jv.cinfo }}</p>
                        </div>
                    </form>
                </div>
                <h3>韻母</h3>
                <table>
                    <thead>
                    <tr ng-repeat="row in tableData.jv.vowels.head">
                        <th ng-if="$first" rowspan="{{ tableData.jv.vowels.headsize.rows }}" colspan="{{ tableData.jv.vowels.headsize.cols }}"></th>
                        <th ng-repeat="ele in row.cells" rowspan="{{ ele.rspan }}" colspan="{{ ele.cspan }}">{{ ele.vl }}</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat-start="cat in tableData.jv.vowels.cats">
                        <td class="rl" rowspan="{{ cat.cat.rspan}}" colspan="{{ cat.cat.cspan }}">{{ cat.cat.vl }}</td>
                        <td ng-repeat="ele in cat.body[0].elements" rowspan="{{ ele.rspan }}" colspan="{{ ele.cspan }}" ng-class="{'rl':ele.corder % 2 == 0, 'pr': ele.corder % 2 != 0, 'pl': ele.corder % 2 == 0, 'vg':ele.vl == '', 'gr':ele.exs != ''}">
                            <a href="javascript://" ng-if="ele.exs != '' " data-template="pi3" data-placement="top" data-container = 'body' data-animation="am-flip-x" data-trigger="hover" data-auto-close="1" bs-popover>
                                <div>
                                    {{ele.vl}}
                                </div>
                            </a>
                            <div ng-if="ele.exs == '' ">
                                {{ele.vl}}
                            </div>
                        </td>
                    </tr>
                    <!-- Now add Details row: -->
                    <tr ng-repeat-end ng-if="!$first" ng-repeat="row in cat.body">
                        <td ng-repeat="ele in row.elements" rowspan="{{ ele.rspan }}" colspan="{{ ele.cspan }}" ng-class="{'rl':ele.corder % 2 == 0, 'pr': ele.corder % 2 != 0, 'pl': ele.corder % 2 == 0, 'vg':ele.vl == '', 'gr':ele.exs != ''}">
                            <a href="javascript://" ng-if="ele.exs != '' " data-template="pi3" data-placement="top" data-container = 'body' data-animation="am-flip-x" data-trigger="hover" data-auto-close="1" bs-popover>
                                <div>
                                    {{ele.vl}}
                                </div>
                            </a>
                            <div ng-if="ele.exs == '' ">
                                {{ele.vl}}
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
                <div ng-if="tableData.jv.vinfo.length != 0" class="row">
                    <form role="form" class="col-md-8 col-md-offset-2">
                        <div class="form-group">
                            <label for="vinfod">關於韻母拼音說明：</label>
                            <p id="vinfod">{{ tableData.jv.vinfo }}</p>
                        </div>
                    </form>
                </div>
            </div>
            <pre ng-if="form.$valid && button.radio != 0">{{tableData.jv | json}}</pre>
        </div>
    </div>
</div>

<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-offset-8">
                <p class="copyright">拼音錄入 maintained by wuciawe</p>
                <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
            </div>
        </div>
    </div>
</footer>
</body>
</html>
